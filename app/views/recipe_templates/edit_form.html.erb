<h1>
  Edit <%= @recipe.title %>
</h1>

<hr>

<form action="/update_recipe/<%= @recipe.id %>" method="post">

  <div class="form-group">
    <label for="title">
      Title
    </label>

    <input type="text" id="title" name="title" class="form-control" value="<%= @recipe.title %>">
  </div>
  <div class="form-group">
    <label for= "ingredient composition">Ingredient Composition</label>
    <ul>
      <%Composition.where(recipe_id: @recipe.id).each do |comp|%>
        <li><%=comp.quantity%> <%=comp.unit_of_measure %> <%=Ingredient.find(comp.ingredient_id).name%> 
        <a href="/compositions/<%=comp.id%>/edit">Edit</a> <a href="/delete_composition/<%=comp.id%>">Delete</a>
        </li> 
      <%end%>
    </ul>
  </div>
  <div class="form-group">
    <label for="instructions">
      Instructions
    </label>
    <input type="text" id="instructions" name="instructions" class="form-control" value="<%= @recipe.instructions %>">
  </div>
  <div class="form-group">
    <label for="calories_per_serving">
      Calories per serving
    </label>
    <input type="text" id="calories_per_serving" name="calories_per_serving" class="form-control" value="<%= @recipe.calories_per_serving %>">
  </div>
    <input type="hidden" id="user_id" name="user_id"value="<%= @recipe.user_id %>">


  <button class="btn btn-block btn-outline-secondary">
    Update recipe
  </button>
</form>

<hr>
    <br>
    <br>
    <h3>
  Add a new ingredient and quantity to this recipe
  </h3>
<form action="/create_composition" method="post">

  <div class="form-group">
    <label for="quantity">
      Quantity
    </label>
    <input type="text" id="quantity" name="quantity" class="form-control">
  </div>
  <div class="form-group">
    <label for="unit_of_measure">Unit of Measure</label>
    <select id="unit_of_measure" name="unit_of_measure" class="form-control">
      <option>cups</option>
      <option>oz</option>
      <option>tbsp</option>
      <option>tsp</option>
      <option>can</option>
      <option>lbs</option>
      <option>pinch</option>
      <option>cloves</option>
      <option>units</option>
    </select>
  </div>
    <input type="hidden" id="recipe_id" name="recipe_id" value="<%= @recipe.id  %>">
  <div class="form-group">
    <label for="ingredient_id">
      Ingredient
    </label>
    <%= select_tag("ingredient_id", options_from_collection_for_select(Ingredient.all, :id, :name), :class => "form-control") %>
    or <a href="/ingredients/new">Add a new ingredient.</a>
  </div>
  <input type="hidden" id="user_id" name="user_id" value="<%= current_user.id %>">
  <input type="hidden" id="recipe_id" name="recipe_id" value="<%= @recipe.id %>">
  <button class="btn btn-block btn-outline-secondary">
    Add recipe composition
  </button>
</form>


<a href="/recipes/<%=@recipe.id%>">
  Go back
</a>

