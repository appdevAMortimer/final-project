<div class="row mb-3">
  <div class="col-md-8 offset-md-2">
    <h1>
      <%= @recipe.title %>
    </h1>

    <div class="row mb-3">
      <div class="col">
        <a href="/recipes" class="btn btn-block btn-outline-secondary">
          Go back
        </a>
      </div>

      <div class="col">
        <a href="/recipes/<%= @recipe.id %>/edit" class="btn btn-block btn-outline-secondary">
          Edit recipe
        </a>
      </div>

      <div class="col">
        <a href="/delete_recipe/<%= @recipe.id %>" class="btn btn-block btn-outline-secondary">
          Delete recipe
        </a>
      </div>
    </div>

    <dl>
      <dt>
        Title
      </dt>
      <dd>
        <%= @recipe.title %>
      </dd>
      <dt>
        Ingredient Composition
      </dt>
      <dd>
        <ul>
          <% Composition.where(:recipe_id => @recipe.id).each do |composition|%>
            <li><%=composition.quantity %> <%=composition.unit_of_measure %> <%=Ingredient.find(composition.ingredient_id).name %></li>
          <%end%>
        </ul>
      </dd>
      <dt>
        Instructions
      </dt>
      <dd>
        <%= @recipe.instructions %>
      </dd>

      <dt>
        Calories per serving
      </dt>
      <dd>
        <%= @recipe.calories_per_serving %>
      </dd>

      <dt>
        Created at
      </dt>
      <dd>
        <%= time_ago_in_words(@recipe.created_at) %> ago
      </dd>

      <dt>
        Updated at
      </dt>
      <dd>
        <%= time_ago_in_words(@recipe.updated_at) %> ago
      </dd>
    </dl>
    <br>
    <br>
    <h3>
  Add an ingredient and quantity
</h3>


<hr>
<form action="/create_composition" method="post">

  <div class="form-group">
    <label for="quantity">
      Quantity
    </label>
    <input type="text" id="quantity" name="quantity" class="form-control">
  </div>
  <div class="form-group">
    <label for="unit_of_measure">Unit of Measure</label>
    <select id="unit_of_measure" name="unit_of_measure" class="form-control">
      <option>cups</option>
      <option>oz</option>
      <option>tbsp</option>
      <option>tsp</option>
      <option>can</option>
      <option>lbs</option>
      <option>pinch</option>
      <option>cloves</option>
      <option>units</option>
    </select>
  </div>
    <input type="hidden" id="recipe_id" name="recipe_id" value="<%= @recipe.id  %>">
  <div class="form-group">
    <label for="ingredient_id">
      Ingredient
    </label>
    <%= select_tag("ingredient_id", options_from_collection_for_select(Ingredient.all, :id, :name), :class => "form-control") %>
    or <a href="/ingredients/new">Add a new ingredient.</a>
  </div>
  <input type="hidden" id="user_id" name="user_id" value="<%= current_user.id %>">
  <input type="hidden" id="recipe_id" name="recipe_id" value="<%= @recipe.id %>">
  <button class="btn btn-block btn-outline-secondary">
    Add recipe composition
  </button>
</form>

<hr>

<a href="/compositions">
  Go back
</a>

  </div>
</div>



